---
id: 3g09c
name: Field Extraction
file_version: 1.1.0
app_version: 1.0.1
---

# Overview
The field extraction module provides the  building blocks to create web
page  scrapers. It  includes a  set of  specialized scrapers,  some tailored  to
specific URL domains, other more general purpose functions to use as fallbacks.

# Extraction Primitives

## HTMLTidy normalization

## CSS-Selector primitives
The simplest  method for  extracting data  from html/xml is  using CSS  or XPath
query selectors, if the relevant information is accessible through such means.

CSS-style query selectors are defined here:
`ðŸ“„ packages/field-extractors/src/core/html-query-primitives.ts`

For example, given a document with an element like this:
```html
<div class="movie">
  <span class="title">Dead Poet's Society</span>
  <span class="year" value="1985" />
</div>
```
We can get the title and year with functions like these:
```typescript
const getTitle = compose(
  selectOne('div.movie'),
  elemQueryOne('span.title'),
  getElemText()
);

const getYear = compose(
  selectOne('div.movie),
  elemQueryOne('span.year'),
  getElemAttr('value')
);
```

### Common standards for metadata tags
Many html  document include header tags  named according to one  of the standard
metadata formats, including Highwire Press,  OpenGraph, DublinCore, as well as a
few non-standard variations of each of those.

Functions to deal with these formats are defined in
`ðŸ“„ packages/field-extractors/src/core/headtag-scripts.ts`

### Case sensitivity in attribute queries
When  selecting a  tag with  a selector  that relies  on a  particular attribute
value,  e.g.,  query=`'meta[name=DC.Creator]'`  to find  elements  like:  `<meta
name="DC.Creator" content="Frank  Jones" />`  it is important  to note  that the
attribute value in the query ('DC.Creator'  in this example), is case sensitive.
Documents are inconsistent, and may include variations like `name="dc.creator"`,
`name="Dc.Creator"`, or `name="DC.Creator"`. The  correct formulation of a query
string that would find all of these variations is the unwieldy

```typescript
queryOne('meta[name=DC.Creator],meta[name=Dc.Creator],meta[name=dc.creator]')
```

To make this easier, the function `expandCaseVariations()` is provided to generate all of the case-variations for a query.
For every capital letter in the input string, the
```typescript
const queryString = expandCaseVariations('DC.Creator', (s) => `meta[name=${n}]` );
const elem = queryOne(queryString);
```


## Text Primitives
Sometimes an html page is formatted such that it does not have any CSS-selectors to reliably pick out a field. In this case,
we can sometimes search through lines of text, matching, filtering and skipping lines.

Text-based primitives are defined in
`ðŸ“„ packages/field-extractors/src/core/text-primitives.ts`

For example,
```typescript

```
## JSON/XML primitives

## Evidence gathering

# Runtime patterns

## Scatter/gather

## Browser redirection

<br/>





This file was generated by Swimm. [Click here to view it in the app](https://app.swimm.io/repos/Z2l0aHViJTNBJTNBb3Blbi1tZXRhLWV4dHJhY3Rpb24lM0ElM0FhZGFtY2hhbmRyYQ==/docs/3g09c).
